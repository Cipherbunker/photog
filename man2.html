<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<link rel="stylesheet" href="man.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<h1 id="NAME">NAME</h1>

<p>Photography::Website - Photography Website Generator</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>    use Photography::Website;

    my $source      = &quot;$ENV{HOME}/Pictures&quot;;
    my $destination = &quot;$ENV{HOME}/public_html&quot;;

    # Process the pictures tree
    my $website = Photography::Website::create_album($source);

    # Generate the website
    Photography::Website::generate($website);</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The Photography::Website module contains the core of the Photog! photography website generator. Please refer to <a>photog</a> for a more general introduction on how to run Photog! and how to configure it. All of the configuration options are documented in <a>Photography::Website::Configure</a>. If you want to learn about the internals of Photog!, read on.</p>

<p>A photography website is generated in two stages. The first stage searches the source directory tree for images and optional <code>photog.ini</code> files, and processes them into a data structure of nested albums. An album is simply a hash of configuration variables one of which ($album-&gt;{items}) references a list of further hashes. This stage is kicked off by the create_album() function.</p>

<p>The second stage loops through this data structure, compares all the sources with their destinations, and (re)generates them if needed. It builds a website with nested album pages that contain image thubmnails and album preview thumbnails. The structure of album pages mirrors the structure of the source image directory. This process is started with the generate() function.</p>

<h1 id="FUNCTIONS">FUNCTIONS</h1>

<dl>

<dt id="create_album-source-parent"><b>create_album</b>(<i>$source</i>[, <i>$parent</i>])</dt>
<dd>

<p>The main entry point for creating a website structure. $source should be a directory name, $parent is only used when this function is called recursively. Returns an album with nested sub-albums that represents the source directory tree.</p>

</dd>
<dt id="generate-album"><b>generate</b>(<i>$album</i>)</dt>
<dd>

<p>The second main entry point that generates the actual website images and HTML files at the destinations specified inside the $album data structure. Returns true if the index of $album has been regenerated.</p>

</dd>
<dt id="update_image-image-force"><b>update_image</b>(<i>$image</i>[, <i>$force</i>])</dt>
<dd>

<p>Given an $image node, checks if the image source is newer than the destination. If needed, or if $force is true, it builds new destination files. Returns true if any images have been (re)generated.</p>

</dd>
<dt id="update_album-album-force"><b>update_album</b>(<i>$album</i>[, <i>$force</i>])</dt>
<dd>

<p>Given an $album node, first deletes any destination files that don&#39;t have a corresponding source. Then it (re)builds the album&#39;s preview and index if an update is needed or if $force is true. Returns true if any changes have been made at the destination directory.</p>

</dd>
<dt id="build_image-image"><b>build_image</b>(<i>$image</i>)</dt>
<dd>

<p>Builds the image&#39;s destination files, by shelling out to the the watermark or scale and thumbnail commands.</p>

</dd>
<dt id="build_index-album"><b>build_index</b>(<i>$album</i>)</dt>
<dd>

<p>Given an $album node, builds an album preview image and the album&#39;s <code>index.html</code> after sorting the album&#39;s images according to Exif dates.</p>

</dd>
<dt id="create_preview-album"><b>create_preview</b>(<i>$album</i>)</dt>
<dd>

<p>Creates an album preview image by making a random selection of the album&#39;s images and calling the <code>photog-preview</code> command.</p>

</dd>
<dt id="select_images-album"><b>select_images</b>(<i>$album</i>)</dt>
<dd>

<p>Returns a list of image paths that are eligible for inclusion in an album preview. It makes sure that the list only contains images whose filename does not appear in the parent album. The reason for this is that the author of Photog! likes to show the best photographs from an album on the front page, but not also have those photographs included in an album preview.</p>

</dd>
<dt id="list-dir"><b>list</b>(<i>$dir</i>)</dt>
<dd>

<p>Returns a list of absolute pathnames to all the files and directories inside $dir.</p>

</dd>
<dt id="is_newer-file1-file2"><b>is_newer</b>(<i>$file1</i>, <i>$file2</i>)</dt>
<dd>

<p>Determines the modification times of $file1 and $file2 (which should pathnames). It both files exist and $file1 is newer than $file2, it returns true. Beware: if both files are of the same age, $file1 is not newer than $file2.</p>

</dd>
<dt id="exifdate-file"><b>exifdate</b>(<i>$file</i>)</dt>
<dd>

<p>Extracts the value of the Exif tag <code>DateTimeOriginal</code> from the provided image path, converts it to ISO 8601 format, and returns it. Prints a warning and returns 0 if the Exif tag could not be found.</p>

</dd>
</dl>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a>photog</a>, <a>Photography::Website::Configure</a></p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Photog! was written by Jaap Joris Vens &lt;jj@rtts.eu&gt;, and is used to create his personal photography website at <a href="http://www.superformosa.nl/">http://www.superformosa.nl/</a></p>


</body>

</html>


